---
title: Управление версиями. Git
subtitle: Пост на тему по выбору на неделю 18

# Summary for listings and search engines
summary: Пост на тему по выбору на неделю 18

# Link this post with a project
projects: []

# Date published
date: '2022-05-07T18:30:00Z'

# Date updated
lastmod: '2022-05-07T18:30:00Z'

# Is this an unpublished draft?
draft: false

# Show this page in the Featured widget?
featured: false

# Featured image
# Place an image named `featured.jpg/png` in this page's folder and customize its options here.

authors:
  - admin

tags:
  - Topical
  - Week 18

categories:
  - Topical
  - Week 18
---

Системы контроля модификаций (СКВ) позволяют отслеживать изменения в коде, просматривать историю для поиска определенных изменений, а также координировать работу над одной и той же базой кода между несколькими разработчиками.
Сегодня мы рассмотрим, как устроена одна из самых популярных СКВ -- Git.

# История
Git был разработан в 2005 году Линусом Торвальдсом для помощи в разрботке ядра Linux. Незадолго до этого произошел скандал с Bitkeeper -- проприетарной системой контроля версий, которая использовалась многими разработчиками, но перестала быть бесплатно доступна после того, как правообладатель узнал, что она была обратно-разработана, чтобы создать SourcePuller.

Целями проекта были: сделать распределенную СКВ, которая могла бы поддерживать процедуру, похожую на Bitkeeper, но также была быстрой (не более трех секунд на применение патча) и имела сильную защиту от ошибок и непреднамеренных модификаций. 

# Принципы

Примитивные структуры данных Git не обязательно реализуют СКВ. Существуют два места, где хранится информация -- динамический *индекс*, который описывает состояние рабочего дерева, и неизменяемая *база данных объектов*. В последней хранятся следующие пять типов объектов:

- BLOB -- содержимое файла, обозначаемое своим хешем. Каждый BLOB -- это отдельная версия файла.
- дерево -- это аналог директории, которая имеет ссылки на под-деревья и BLOB, чтобы представить одну версию рабочего дерева.
- коммит -- это элемент истории, указывающий на дерево, описываемое им, и на один или больше предыдущих коммитов.
- тэг -- объект, который имеет ссылку на какой-то другой объект и какую-то дополнительную информацию об этом объекте. Чаще всего используется для добавления цифровых подписей к коммитам.
- packfile -- файл, содержащий несколько других объектов в сжатом формате для компактности.

Из-за этого дизайна каждый репозиторий содержит всю историю и может быть просмотрен локально. Это то, что делает Git *распределенной* СКВ.

История коммитов устроена как односвязное дерево, и из-за того, что идентификаторы основаны на криптографическом хеше содержимого, это также можно воспринимать как экземпляр блокчейна. Каждый коммит может иметь родителя -- коммит, на основании которого сделаны изменения. С помощью них можно идти назад в историю изменений. Поскольку каждый коммит идентифицируется своим хешем, то любое изменение истории требует пересчета хеша каждого из объектов дальше, что предоставляет криптографическую защиту от изменений.

В дополнение к этому Git хранит базу ссылок. Head-объекты указывают на последний коммит в ветке, называют ветку, и тем самым фактически являются ветками. Один особый head, называемый HEAD, указывает на текущую ветку, от который идет сравнение с рабочим деревом. Также существуют tags, которые, как и head, указывают на коммиты, но в отличие от них не двигаются, и вместо этого могут быть использованы для обозначения важных точек в истории проекта.

# Процесс ведения истории

Git не регламентирует, как именно следует вести историю проекта. Один из вариантов, который предполагается к использованию в курсе ОС, предполагает короткоживущие ветки, внутри которых производится работа по реализации новой фичи, и затем эта ветка сливается в основное дерево, когда фича завершена. Другие варианты включают долгоживущие ветки, ранжированные по стабильности кода, или ветки, закрепленные за определенными членами команды.

Разные методы имеют свои плюсы и минусы, которые более или менее явно проявляются в зависимости от типа проекта и методологии разработки, которую использует команда. 

# Выводы

Git -- это одна из самых популярных СКВ, и это не случайно. Она была написана для того, чтобы разрешить проблемы с существовавшими СКВ, и она смогла решить их гораздо более эффективно, чем любые другие решения в то время.

Одним из факторов ее популярности стало развитие сервисов хостинга Git, таких как GitHub, GitLab и BitBucket. Эти сервисы позволяют опубликовать Git-репозиторий и сделать его доступным из интернета, и их удобство привело к тому, что сейчас многие пользователи неразрывно ассоциируют Git с GitHub.

Благодаря такой популярности, простоте казуального использования и при этом глубине функционала для продвинутого использования, Git теперь является необходимостью для любого рода разработки кода. Именно поэтому на курсе ОС мы изучаем основы использования Git.